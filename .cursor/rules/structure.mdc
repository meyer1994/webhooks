---
alwaysApply: true
---

# Flower Project Structure & Conventions

This is a Vue 3 + Nuxt 4 + Nuxt UI 4 application with AI/LangChain integration for document processing.

## Key Technologies

- **Frontend**: Vue 3 + Nuxt 4 + Nuxt UI 4 + VueUse + Tailwind v4
- **Backend**: tRPC + Drizzle ORM (Cloudflare D1/SQLite) + H3
- **AI**: LangChain + Langgraph + Cloudflare Workers AI
- **Auth**: nuxt-auth-utils (Auth0)
- **Storage**: AWS S3 Compatible (Cloudflare R2)
- **Package Manager**: pnpm

## Project Structure

```
├── app/                 # Frontend application (Vue/Nuxt)
│   ├── assets/          # CSS, images, etc. (main.css uses Tailwind v4)
│   ├── components/      # Vue components (prefixed by type, e.g., Table*, Form*)
│   ├── pages/           # Nuxt pages for routing
│   └── plugins/trpc.ts  # tRPC client setup
└── server/              # Backend application
    ├── api/trpc/        # tRPC endpoint handler
    ├── db/              # Database schema & migrations
    ├── middleware/      # Server middleware (db, storage, vector initialization)
    ├── tasks/           # Background tasks / Nitro tasks
    ├── trpc/            # tRPC routers & procedures
    └── utils/           # Server utilities (auto-imported by Nuxt)
```

## Development Commands

- `pnpm dev` - Start development server
- `pnpm build` - Build for production
- `pnpm typecheck` - Run TypeScript checks
- `pnpm lint` - Check for linting errors (ESLint Stylistic)
- `pnpm lint:fix` - Fix linting errors automatically

## Coding Style & Patterns

- **Formatting**: ESLint Stylistic (no semicolons, trailing commas, 100 character line limit).
- **TypeScript**: Strict mode enabled. Use `type` for definitions, `interface` only when necessary.
- **Components**: Use `<script setup lang="ts">`. Follow Nuxt UI 4 patterns.
- **State**: Use `ref()` and `reactive()` from Vue. Use `useVueUse()` where appropriate.
- **Database**: Use Drizzle ORM with `ctx.db` in tRPC procedures.
- **Data Fetching**: Prefer page-level fetching with `useAsyncData` and `$trpc`.
- **Import Aliases**:
  - Use `~~/` (or `@@/`) for root-level imports (project root)
  - Use `~/` (or `@/`) for `app/` directory imports
  - Always prefer `~~/` for root imports in server-side code and cross-directory imports
